extends layout

block content
    h1 ðŸ“œ Danh sÃ¡ch hÃ³a Ä‘Æ¡n (Admin)

    // Thanh tÃ¬m kiáº¿m
    .mb-3
        input#searchInput.form-control(type="text", placeholder="ðŸ” Nháº­p mÃ£ hÃ³a Ä‘Æ¡n hoáº·c tÃªn sáº£n pháº©m Ä‘á»ƒ tÃ¬m kiáº¿m...")

    table#invoiceTable.table.table-hover.table-bordered.text-center
        thead.table-dark
            tr
                th ðŸ†” MÃ£ hÃ³a Ä‘Æ¡n
                th ðŸ·ï¸ TÃªn sáº£n pháº©m
                th ðŸ”¢ Sá»‘ lÆ°á»£ng
                th ðŸšš Tráº¡ng thÃ¡i
                th ðŸ“… NgÃ y xuáº¥t
                th ðŸ› ï¸ HÃ nh Ä‘á»™ng
        tbody
            each invoice in invoices
                tr
                    td #{invoice._id}
                    td #{invoice.product ? invoice.product.name : "Sáº£n pháº©m khÃ´ng tá»“n táº¡i"} 
                    td #{invoice.quantity}
                    td 
                        if invoice.status === "ÄÃ£ giao"
                            span.badge.badge-success.text-dark #{invoice.status}
                        else if invoice.status === "Äang xá»­ lÃ½"
                            span.badge.badge-warning.text-dark #{invoice.status}
                        else 
                            span.badge.badge-secondary.text-dark #{invoice.status}
                    td #{invoice.date.toLocaleDateString('vi-VN')}
                    td 
                        a.btn.btn-primary.btn-sm.me-2(href=`/invoice/edit/${invoice._id}`) âœï¸ Chá»‰nh sá»­a
                        form.d-inline(action=`/invoice/delete/${invoice._id}`, method="POST")
                            button.btn.btn-danger.btn-sm(type="submit", onclick="return confirm('Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n xÃ³a hÃ³a Ä‘Æ¡n nÃ y?')") ðŸ—‘ï¸ XÃ³a

    // JavaScript Ä‘á»ƒ lá»c danh sÃ¡ch hÃ³a Ä‘Æ¡n theo tÃ¬m kiáº¿m
    script.
        document.getElementById("searchInput").addEventListener("keyup", function() {
            let searchValue = this.value.toLowerCase();
            let rows = document.querySelectorAll("#invoiceTable tbody tr");

            rows.forEach(row => {
                let invoiceId = row.children[0].innerText.toLowerCase();
                let productName = row.children[1].innerText.toLowerCase();

                if (invoiceId.includes(searchValue) || productName.includes(searchValue)) {
                    row.style.display = "";
                } else {
                    row.style.display = "none";
                }
            });
        });
